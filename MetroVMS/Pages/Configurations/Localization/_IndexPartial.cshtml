@model IndexModel
@using MetroVMS.Localization
@using X.PagedList;
@using X.PagedList.Mvc.Core;
@* @using X.PagedList.Mvc.Core.Common;
@using X.PagedList.Web.Common;*@

@inject ISharedLocalizer Localize
 
<div class="table-responsive">
    <input type="hidden" asp-for="pageNo" id="hidpageNo" />
    <input type="hidden" asp-for="pageSize" id="hidpageSize" />
    <input type="hidden" asp-for="sortColumn" id="hidSortColumn" />
    <input type="hidden" asp-for="sortOrder" id="hidSortOrder" />
    <input type="hidden" asp-for="searchField" id="hidSearchField" />

    <table class="table table-hover table-rounded table-striped border gy-4 gs-7 table-sortable">
        <thead>
            <tr>

                <th class="sorting t-plr-sm-5" area-field="Module">
                    @Localize.Localize("TRANSLATION_MODULE")
                    <span>
                        <i class="fas fa-sort text-white" aria-hidden="true"></i>
                    </span>
                </th>
                <th class="sorting t-plr-sm-5" area-field="Name">
                    @Localize.Localize("TRANSLATION_FIELD_NAME")
                    <span><i class="fas fa-sort text-white" aria-hidden="true"></i></span>
                </th>
                <th class="sorting t-plr-sm-5" area-field="Description">
                    @Localize.Localize("TRANSLATION_FIELD_DESCRIPTION")
                    <span><i class="fas fa-sort text-white" aria-hidden="true"></i></span>
                </th>
                <th class="sorting t-plr-sm-5" area-field="LocalizationArabic">
                    @Localize.Localize("TRANSLATION_LANGUAGE_ARABIC")
                    <span><i class="fas fa-sort text-white" aria-hidden="true"></i></span>
                </th>
                <th class="sorting t-plr-sm-5" area-field="LocalizationEnglish">
                    @Localize.Localize("TRANSLATION_LANGUAGE_ENGLISH")
                    <span><i class="fas fa-sort text-white" aria-hidden="true"></i></span>
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model.localizationResources != null && Model.localizationResources.Count() > 0)
            {
                @for (int i = 0; i < Model.localizationResources.Count(); i++)
                {
                    var item = Model.localizationResources[i];
                    <tr>

                        <input type="hidden" asp-for="localizationResources[i].Module" />
                        <input type="hidden" asp-for="localizationResources[i].Name" />
                        <input type="hidden" asp-for="localizationResources[i].Description" />

                        <td>@Html.Raw((Model.localizationResources[i].Module))</td>
                        <td>@Html.Raw((Model.localizationResources[i].Name))</td>
                        <td>@Html.Raw((Model.localizationResources[i].Description))</td>
                        <td>
                            <input type="text" asp-for="@Model.localizationResources[i].LocalizationArabic" class="form-control form-control-sm" />
                        </td>
                        <td>
                            <input type="text" asp-for="@Model.localizationResources[i].LocalizationEnglish" class="form-control form-control-sm" />
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<div class="row">
    <div class="col-sm-12 col-md-4 d-flex align-items-center justify-content-center justify-content-md-start">
        <div class="dataTables_length" id="kt_datatable_fixed_header_length">
            <label>
                <select asp-for="pageSize" id="kt_datatable_page_size" class="form-select form-select-sm form-select-solid">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
            </label>
        </div><div class="dataTables_info" id="kt_datatable_fixed_header_info" role="status" aria-live="polite">Showing @(Model?.pagedListData?.FirstItemOnPage ?? 0) to @(Model?.pagedListData?.LastItemOnPage ?? 0) of @(Model?.pagedListData?.TotalItemCount ?? 0) records</div>
    </div><div class="col-sm-12 col-md-8 d-flex align-items-center justify-content-center justify-content-md-end">
        <div class="dataTables_paginate paging_simple_numbers" id="kt_datatable_fixed_header_paginate">
            @if (Model.hasPagination)
            {
                <div>
                    @Html.PagedListPager((IPagedList)Model.pagedListData, page => Url.Page("Index", "PagedList",
                new
                {
                pn = page,
                ps = Model.pageSize,
                so = Model.sortOrder,
                sc = Model.sortColumn,
                nm = Model.globalSearch
                }),
                PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new PagedListRenderOptions()
                {
                PageClasses = new string[] { "page-link" },
                LiElementClasses=new string[] { "page-item" },
                UlElementClasses = new string[] { "pagination pagination-circle pagination-outline" },
                EllipsesElementClass = "ki-duotone ki-double-left fs-2",
                Display = PagedListDisplayMode.IfNeeded,
                DisplayLinkToFirstPage = PagedListDisplayMode.Always,
                DisplayLinkToLastPage = PagedListDisplayMode.Always,
                DisplayLinkToPreviousPage = PagedListDisplayMode.Always,
                DisplayLinkToNextPage = PagedListDisplayMode.Always,
                LinkToPreviousPageFormat = "<i class='fas fa-angle-left'></i>",
                LinkToNextPageFormat = "<i class='fas fa-angle-right'></i>",
                LinkToFirstPageFormat= "<i class='fas fa-step-backward'></i>",
                LinkToLastPageFormat= "<i class='fas fa-step-forward'></i>",
                MaximumPageNumbersToDisplay = 10, // Adjust this number as needed
                }, new AjaxOptions()
                { HttpMethod = "Get", UpdateTargetId = "_postList", OnBegin = "showInTableLoader()", OnSuccess = "", OnComplete = "hideInTableLoader()" }))
                </div>
            }
        </div>
    </div>
</div>

<div id="tableLoader" class="loader-container">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

@* <div class="loading-ct loader-display">
    <div id="customerDatatable_processing" class="dataTables_processing loader-display">
        <img src="~/media/load1.png" asp-append-version="true">

    </div>
</div> *@

<script src="~/js/ktable.js" asp-append-version="true"></script>

<script type="text/javascript">

       $(function () {
            $(document).ready(function ()
               {
                  $("#tableLoader").removeClass("hidden"); // Show loader on page load

                      $(document).ready(function () {
                          $("#tableLoader").addClass("hidden");
                      });
            });
       });

</script>